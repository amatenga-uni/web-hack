<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>Verify</title>
  <style>
    #extension {
      display: none;
      border: 6px solid black;
      margin: 25px;
      border-radius: 10px;
    }
  </style>
  <link href="css/styles.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <div class="container">
    <header class="header">
      <h1>The Wonderful and Wacky Waikato Web Hack</h1>
    </header>

    <div class="main-content">
      <h1>Verify your combination!</h1>
      <p>
        Congratulations! You should now have all 8 digits of the combination.
        To verify you've got the combination in the correct order, enter it
        below and click "Verify".
        <br />
        <br />If it's correct, you can enter it into the safe, but if it's
        incorrect then you can try again.
      </p>

      <input type="text" id="combination" placeholder="Enter combination here ..." />
      
      <button onclick="verifyCombination()"><h4>Verify</h4></button>

      <div id="extension">
        <p>Congratulations on completing The Wonderful and Wacky Waikato Web Hack!</p>
        <p>But wait... There's more...</p>
        <p>We have created some extension challenges that dig a little deeper into web development.</p>
        <p><a href="">Click here</a> to begin the extension challenges.</p>
      </div>

    </div>
    <!-- Footer code here -->
    <footer>
      <img class="logo logo--uni" src="images/waikato_uni_logo.svg" alt="Waikato Logo" />
      <img class="logo logo--stemm" src="images/tohu_matua_white.png" alt="PÅ«horo STEMM Academy Logo" />
    </footer>

    <script>
      let ext_visible = false;

      function verifyCombination() {
        // The correct combination has been hashed in order to hide it from the user
        var input = document
          .getElementById("combination")
          .value.toString()
          .hashCode();
        var combination = 1852585700;
        if (input === combination) {
          alert("Combination is correct!");
          showExtension();
        } else {
          alert("Combination is incorrect, please try again.");
        }
      }

      function showExtension() {
        if (ext_visible) {
          return;
        }
        ext_visible = true;
        let ext = document.getElementById("extension");
        ext.style.display = "block";
      }

      String.prototype.hashCode = function () {
        var hash = 0,
          i,
          chr;
        if (this.length === 0) return hash;
        for (i = 0; i < this.length; i++) {
          chr = this.charCodeAt(i);
          hash = (hash << 5) - hash + chr;
          hash |= 0; // Convert to 32bit integer
        }
        return hash;
      };
    </script>
</body>

</html>